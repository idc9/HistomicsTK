<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing &mdash; HistomicsTK 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Credits" href="authors.html" />
    <link rel="prev" title="Analyzing remotely hosted images with the girder client" href="examples/workflows.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> HistomicsTK
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#report-bugs">Report Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fix-bugs">Fix Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implement-features">Implement Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-documentation">Write Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unit-testing-notes">Unit Testing Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#travis-integration-notes">Travis Integration Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HistomicsTK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Contributing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading">¶</a></h1>
<p>Contributions are welcome, and they are greatly appreciated! Every
little bit helps, and credit will always be given.</p>
<p>You can contribute in many ways:</p>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permalink to this heading">¶</a></h2>
<section id="report-bugs">
<h3>Report Bugs<a class="headerlink" href="#report-bugs" title="Permalink to this heading">¶</a></h3>
<p>Report bugs at <a class="reference external" href="https://github.com/DigitalSlideArchive/HistomicsTK/issues">https://github.com/DigitalSlideArchive/HistomicsTK/issues</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul class="simple">
<li><p>Your operating system name and version.</p></li>
<li><p>Any details about your local setup that might be helpful in troubleshooting.</p></li>
<li><p>Detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h3>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this heading">¶</a></h3>
<p>Look through the GitHub issues for bugs. Anything tagged with “bug”
is open to whoever wants to implement it.</p>
</section>
<section id="implement-features">
<h3>Implement Features<a class="headerlink" href="#implement-features" title="Permalink to this heading">¶</a></h3>
<p>Look through the GitHub issues for features. Anything tagged with “enhancement”
is open to whoever wants to implement it.</p>
</section>
<section id="write-documentation">
<h3>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this heading">¶</a></h3>
<p>HistomicsTK could always use more documentation, whether as part of the
official HistomicsTK docs, in docstrings, or even on the web in blog posts,
articles, and such.</p>
</section>
<section id="submit-feedback">
<h3>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permalink to this heading">¶</a></h3>
<p>The best way to send feedback is to file an issue at <a class="reference external" href="https://github.com/DigitalSlideArchive/HistomicsTK/issues">https://github.com/DigitalSlideArchive/HistomicsTK/issues</a>.</p>
<p>If you are proposing a feature:</p>
<ul class="simple">
<li><p>Explain in detail how it would work.</p></li>
<li><p>Keep the scope as narrow as possible, to make it easier to implement.</p></li>
<li><p>Remember that this is a volunteer-driven project, and that contributions
are welcome :)</p></li>
</ul>
</section>
</section>
<section id="get-started">
<h2>Get Started!<a class="headerlink" href="#get-started" title="Permalink to this heading">¶</a></h2>
<p>Ready to contribute? Here’s how to set up <cite>HistomicsTK</cite> for local development.</p>
<ol class="arabic">
<li><p>Fork the <cite>HistomicsTK</cite> repo on GitHub.</p></li>
<li><p>Clone your fork locally:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:your_name_here/HistomicsTK.git
</pre></div>
</div>
</li>
<li><p>Install your local copy into a virtualenv. Assuming you have virtualenvwrapper installed, this is how you set up your fork for local development:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ mkvirtualenv HistomicsTK
$ <span class="nb">cd</span> HistomicsTK/
$ python -m pip install setuptools-scm Cython&gt;<span class="o">=</span><span class="m">0</span>.25.2 scikit-build&gt;<span class="o">=</span><span class="m">0</span>.8.1 cmake&gt;<span class="o">=</span><span class="m">0</span>.6.0 numpy&gt;<span class="o">=</span><span class="m">1</span>.12.1
$ python setup.py develop
</pre></div>
</div>
</li>
</ol>
<p>Of course, any type of virtual python environment will do. These instructions are equally applicable inside <cite>conda</cite> environments.</p>
<ol class="arabic" start="4">
<li><p>Create a branch for local development:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ git checkout -b name-of-your-bugfix-or-feature
</pre></div>
</div>
<p>Now you can make your changes locally.</p>
</li>
<li><p>Commit your changes and push your branch to GitHub:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Your detailed description of your changes.&quot;</span>
$ git push origin name-of-your-bugfix-or-feature
</pre></div>
</div>
</li>
</ol>
<ol class="arabic simple" start="7">
<li><p>Submit a pull request through the GitHub website.</p></li>
</ol>
</section>
<section id="pull-request-guidelines">
<h2>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Permalink to this heading">¶</a></h2>
<p>Before you submit a pull request, check that it meets these guidelines:</p>
<ol class="arabic simple">
<li><p>The pull request should include unit tests (see notes below).</p></li>
<li><p>If the pull request adds functionality, the docs should be updated. Put
your new functionality into a function with a docstring, and make sure
your feature is reflected in one of the <cite>.rst</cite> files under <cite>./docs/</cite>.
If an existing module exists and your feature is appended to it,
then you can ignore this step as Sphinx will render it automatically.
Otherwise, create a new <cite>.rst</cite> file.</p></li>
<li><p><strong>(Optional)</strong> Create a Jupyter Notebook or a detailed documentation <cite>.rst</cite>
under <cite>./docs/examples/</cite> to explain exactly how the feature should be used.</p></li>
<li><p>The pull request should work for Python 3.6, 3.7, 3.8, and 3.9. Check that
the tests pass on the pull request for all supported Python versions.</p></li>
</ol>
</section>
<section id="unit-testing-notes">
<h2>Unit Testing Notes<a class="headerlink" href="#unit-testing-notes" title="Permalink to this heading">¶</a></h2>
<p>There are two ‘types` of unit tests on HistomicsTK.</p>
<ul>
<li><p><strong>Ordinary unit testing:</strong></p>
<p>All unit testing uses the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module, and you should avoid using python’s
<code class="docutils literal notranslate"><span class="pre">unittest</span></code> module. Unit testing using dependency libraries such as <code class="docutils literal notranslate"><span class="pre">numpy</span></code>
or <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is allowed. Use the standard <code class="docutils literal notranslate"><span class="pre">test_python_file.py</span></code>
naming convention. It is important that you check the
<a class="reference external" href="https://docs.pytest.org/en/latest/goodpractices.html#test-discovery">pytest naming convention</a>
to make sure your discovered and actually run. Most of the unit tests are
going to be stand-alone, and use data files that are small (e.g. csv files)
that are contained (or added to) this repository.</p>
<p>You can run your tests using something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pytest your_python_file_test.py
</pre></div>
</div>
</li>
<li><p><strong>Server side testing:</strong></p>
<p>Sometimes you need to write unit tests for features that use an authenticated
girder client that is connected to a Digital Slide Archive server. For example,
you may want to test a feature that fetches regions from a slide on the DSA server and
does some analysis with it. In that case, be sure to use the helper methods provided
in <code class="docutils literal notranslate"><span class="pre">./tests/htk_test_utilities.py</span></code>.
The unit tests in <code class="docutils literal notranslate"><span class="pre">./histomicstk/annotations_and_masks/tests/annotations_to_masks_handler_test.py</span></code>
provide an example of how to handle these situations. Note that when access is need to
a very large whole-slide image, <code class="docutils literal notranslate"><span class="pre">GirderClient</span></code> is used to provide access to the
slide and annotations, which are referenced using <code class="docutils literal notranslate"><span class="pre">.sha512</span></code> hash that
is present in <code class="docutils literal notranslate"><span class="pre">./tests/data/</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest</span></code> fixture <code class="docutils literal notranslate"><span class="pre">girderClient</span></code>, defined in <code class="docutils literal notranslate"><span class="pre">tests/htk_test_utilities.py</span></code>
yields an authenticated girder client that points to the server. If a local
girder server docker is running, this will connect to it, otherwise, it will
spin up a local girder server, load it with some initial data, and connect to it.</p>
<blockquote>
<div><p><strong>NOTE:</strong></p>
<p>The default behavior initializes the docker image once per module and
re-uses it for all tests. This means whatever one unit test changes in
the DSA database is persistent for the next unit test. So if, for example,
you remove one annotation as part of the first unit test, the next unit
test will not have access to that annotation. Once all the unit tests are
done, the database is torn down.</p>
<p>If, instead, if you would like to run tests <em>repeatedly</em> (i.e. prototyping),
or you would like the changes written by tests in one module to be
carried over to the next test module, you may prefer to start the server
manually. That way you won’t worry about unknown wait time till the local
server is fully initialized. To manually start a DSA docker image:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> HistomicsTK/tests/
$ docker-compose up --build
</pre></div>
</div>
</div></blockquote>
<p>You can run your tests using something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pytest test_python_file.py
</pre></div>
</div>
<p>Of course, you need to have docker installed and to either
run this as sudo or be added to the docker group by the system admins.</p>
<p>Please contact the owners if you have questions about this or need support on how to
host your test data on <code class="docutils literal notranslate"><span class="pre">data.kitware.com</span></code> to make this work.</p>
</li>
</ul>
</section>
<section id="travis-integration-notes">
<h2>Travis Integration Notes<a class="headerlink" href="#travis-integration-notes" title="Permalink to this heading">¶</a></h2>
<p>When you submit a pull request to merge your branch with master, it will be
automatically submitted to Travis CI for continuous integration. In plain
English, your new branch will be tested to make sure it complies with the
standardized coding and documentation style of this repo. If you’d like
to help the organizers integrate your changes seamlessly, check to see
if the travis CI was passed. Otherwise, examine for errors and see if you
can get them fixed. Oftentimes, the errors originate from code and docstring
formatting and/or integration of jupyter notebooks into the documentaion
examples. Here are some pointers to help you handle some of these issues:</p>
<ul>
<li><p>Consider using <code class="docutils literal notranslate"><span class="pre">flake8</span></code> package to check if you comply with the
formatting standard. HistomicsTK uses PEP8 standard with some options
turned off. The <code class="docutils literal notranslate"><span class="pre">flake8</span></code> parameters we use can be found in:
<a class="reference external" href="https://github.com/girder/girder/blob/2.x-maintenance/setup.cfg">https://github.com/girder/girder/blob/2.x-maintenance/setup.cfg</a></p>
<p>For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ flake8 your_python_file.py
</pre></div>
</div>
<p>You can find <code class="docutils literal notranslate"><span class="pre">flake8</span></code> at: <a class="reference external" href="http://flake8.pycqa.org/en/latest/">http://flake8.pycqa.org/en/latest/</a></p>
<p>If you like using Vim editor, there is a tool to integrate <code class="docutils literal notranslate"><span class="pre">flake8</span></code>
with Vim for easy correction of errors at: <a class="reference external" href="https://github.com/nvie/vim-flake8">https://github.com/nvie/vim-flake8</a></p>
</li>
<li><p>If your text editor does not already have this feature, consider using the
package <code class="docutils literal notranslate"><span class="pre">autopep8</span></code> to comply with PEP8 standard: <a class="reference external" href="https://github.com/hhatto/autopep8">https://github.com/hhatto/autopep8</a> .
for example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ autopep8 --in-place --aggressive your_python_file.py
</pre></div>
</div>
</li>
<li><p>Consider using <code class="docutils literal notranslate"><span class="pre">pydocstyle</span></code> to check if you comply with the PEP257
standard for docstrings: <a class="reference external" href="https://github.com/PyCQA/pydocstyle">https://github.com/PyCQA/pydocstyle</a> . For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pydocstyle your_python_file.py
</pre></div>
</div>
</li>
<li><p>If your text editor does not already do this, consider using <code class="docutils literal notranslate"><span class="pre">docformatter</span></code>
to fix docstrings to standard: <a class="reference external" href="https://pypi.org/project/docformatter/">https://pypi.org/project/docformatter/</a> . For
example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docformatter --in-place --pre-summary-newline --blank your_python_file.py
</pre></div>
</div>
</li>
<li><p>If you added new functionality, consider adding the documentation under
<code class="docutils literal notranslate"><span class="pre">doc</span></code> in the form of rst files. Also consider creating Jupyter
Notebooks to showcase functionality under <code class="docutils literal notranslate"><span class="pre">doc/examples/</span></code>. The documentation
is automatically generated using <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> when you push your pull request and
it gets submitted for travis integration. If you added documentation, consider
checking if <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> throws errors offline. you may install it from:
<a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">https://www.sphinx-doc.org/en/master/index.html</a>
create a folder for the generated documentation to be saved, let’s say
<code class="docutils literal notranslate"><span class="pre">~/HistomicsTK_test_build/</span></code> . Then you may run something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> HistomicsTK
$ sphinx-build ./docs/ ~/HistomicsTK_test_build/ <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> tee out.log
</pre></div>
</div>
<p>Then you may check the file <code class="docutils literal notranslate"><span class="pre">out.log</span></code> for build errors.</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples/workflows.html" class="btn btn-neutral float-left" title="Analyzing remotely hosted images with the girder client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="authors.html" class="btn btn-neutral float-right" title="Credits" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Kitware, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>